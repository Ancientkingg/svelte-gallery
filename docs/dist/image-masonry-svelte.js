!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ImageMasonryExample=e()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function a(t){var n="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return s(t,arguments,o(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?u(t):e}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(){}function d(t,e){for(var n in e)t[n]=e[n];return t}function p(t){return t()}function m(){return Object.create(null)}function v(t){t.forEach(p)}function _(t){return"function"==typeof t}function y(t,e){return t!=t?e==e:t!==e||t&&"object"===n(t)||"function"==typeof t}function b(t,e,n){return t[1]?d({},d(e.$$scope.ctx,t[1](n?n(e):{}))):e.$$scope.ctx}function w(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function z(){return function(t){return document.createTextNode(t)}(" ")}function E(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}var O;function k(t){O=t}function R(t){(function(){if(!O)throw new Error("Function called outside component initialization");return O})().$$.on_mount.push(t)}function P(){var i=O;return function(t,e){var n=i.$$.callbacks[t];if(n){var r=function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(t,e);n.slice().forEach(function(t){t.call(i,r)})}}}var A=[],S=[],F=[],C=[],T=Promise.resolve(),I=!1;function D(t){F.push(t)}function H(){var t=new Set;do{for(;A.length;){var e=A.shift();k(e),L(e.$$)}for(;S.length;)S.pop()();for(var n=0;n<F.length;n+=1){var r=F[n];t.has(r)||(r(),t.add(r))}F.length=0}while(A.length);for(;C.length;)C.pop()();I=!1}function L(t){t.fragment&&(t.update(t.dirty),v(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(D))}var M,W=new Set;function B(t,e){t&&t.i&&(W.delete(t),t.i(e))}function q(t,e,n,r){if(t&&t.o){if(W.has(t))return;W.add(t),M.c.push(function(){W.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function N(e,t,n){var r=e.$$,i=r.fragment,o=r.on_mount,c=r.on_destroy,s=r.after_update;i.m(t,n),D(function(){var t=o.map(p).filter(_);c?c.push.apply(c,f(t)):v(t),e.$$.on_mount=[]}),s.forEach(D)}function U(t,e){t.$$.fragment&&(v(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function V(t,e){t.$$.dirty||(A.push(t),I||(I=!0,T.then(H)),t.$$.dirty=m()),t.$$.dirty[e]=!0}function G(r,t,e,n,i,o){var c=O;k(r);var s=t.props||{},a=r.$$={fragment:null,ctx:null,props:o,update:g,not_equal:i,bound:m(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:m(),dirty:null},u=!1;a.ctx=e?e(r,s,function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e;return a.ctx&&i(a.ctx[t],a.ctx[t]=n)&&(a.bound[t]&&a.bound[t](n),u&&V(r,t)),e}):s,a.update(),u=!0,v(a.before_update),a.fragment=n(a.ctx),t.target&&(t.hydrate?a.fragment.l(function(t){return Array.from(t.childNodes)}(t.target)):a.fragment.c(),t.intro&&B(r.$$.fragment),N(r,t.target,t.anchor),H()),k(c)}var J=function(){function t(){r(this,t)}return e(t,[{key:"$destroy",value:function(){U(this,1),this.$destroy=g}},{key:"$on",value:function(t,e){var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}}},{key:"$set",value:function(){}}]),t}(),K={single_source_shortest_paths:function(t,e,n){var r={},i={};i[e]=0;var o,c,s,a,u,l,f=new Q(function(t){return t.cost});for(f.push({value:e,cost:0});f.size();)for(var h in c=(o=f.pop()).value,s=o.cost,a=t(c)||{})u=s+a[h],l=i[h],(void 0===i[h]||u<l)&&(i[h]=u,f.push({value:h,cost:u}),r[h]=c);if(void 0!==i[n])return r;var g=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(g)},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e;r;)n.push(r),t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){var r=K.single_source_shortest_paths(t,e,n);return K.extract_shortest_path_from_predecessor_list(r,n)}};function Q(t){this.content=[],this.scoreFunction=t}function X(t,e){return e/t}function Y(t,e){return t/e}function Z(t,e,n){return function(t,e){return t*e}(e,X(t.reduce(function(t,e){return t+e.scaledWidth},0),n))}function tt(t,a,u,e,n){for(var l=3<arguments.length&&void 0!==e?e:8,r=4<arguments.length&&void 0!==n&&n,f=t.map(function(t){var e=X(t.width,t.height);return function(i){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(o,!0).forEach(function(t){var e,n,r;e=i,r=o[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):h(o).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))})}return i}({},t,{ratio:e,scaledWidth:Y(u,e),scaledHeight:u,scaledWidthPc:0})}),i=K.find_path(function(t){var e,n,r,i,o,c={};c[t=+t]=0;for(var s=t+1;s<f.length+1&&!(l<s-t);++s)c[""+s]=(e=t,n=s,r=a,i=u,void 0,o=Z(f.slice(e,n),r,i),Math.pow(Math.abs(o-i),2));return c},"0",f.length),o=[],c=[],s=0;s<i.length;s++)i[s+1]&&function(){var t=f.slice(+i[s],+i[s+1]),e=Z(t,a,u);t.forEach(function(t){t.scaledWidth=Y(e,t.ratio),t.scaledHeight=e,t.scaledWidthPc=t.scaledWidth/a*100,c.push(t)}),o.push(t)}();return r?o:c}function et(n){var r=n.target||n.srcElement;r.__resizeRAF__&&cancelAnimationFrame(r.__resizeRAF__),r.__resizeRAF__=requestAnimationFrame(function(){var e=r.__resizeTrigger__,t=e&&e.__resizeListeners__;t&&t.forEach(function(t){t.call(e,n)})})}Q.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.sinkDown(0)),t},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]===t){var r=this.content.pop();return void(n!==e-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];0<t;){var n=Math.floor((t+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i=2*(t+1),o=i-1,c=null;if(o<e){var s=this.content[o],a=this.scoreFunction(s);a<r&&(c=o)}if(i<e){var u=this.content[i];this.scoreFunction(u)<(null===c?r:a)&&(c=i)}if(null==c)break;this.content[t]=this.content[c],this.content[c]=n,t=c}}};function nt(t,e){var n,r=this.document,i=r.attachEvent;if("undefined"!=typeof navigator&&(n=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!t.__resizeListeners__)if(t.__resizeListeners__=[],i)(t.__resizeTrigger__=t).attachEvent("onresize",et);else{"static"===getComputedStyle(t).position&&(t.style.position="relative");var o=t.__resizeTrigger__=r.createElement("object");o.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),o.setAttribute("class","resize-sensor"),o.setAttribute("tabindex","-1"),o.__resizeElement__=t,o.onload=function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",et)},o.type="text/html",n&&t.appendChild(o),o.data="about:blank",n||t.appendChild(o)}t.__resizeListeners__.push(e)}var rt="undefined"==typeof window?nt:nt.bind(window),it=function(t,e){var n=document.attachEvent,r=t.__resizeListeners__||[];if(e){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}else r=t.__resizeListeners__=[];if(!r.length){if(n)t.detachEvent("onresize",et);else if(t.__resizeTrigger__){var o=t.__resizeTrigger__.contentDocument,c=o&&o.defaultView;c&&(c.removeEventListener("resize",et),delete c.__resizeTrigger__),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)}delete t.__resizeListeners__}};rt.unbind=it;var ot=function(t){t.image;var e=t.scaledImages;t.index;return{image:e}},ct=function(t){var e=t.image;t.scaledImages;return{image:e,index:t.index}};function st(t,e,n){var r=Object.create(t);return r.image=e[n],r.index=n,r}function at(n){var r,i,o,c,s,a,u,l,e,f=n.$$slots.default,h=function(t,e,n){if(t){var r=b(t,e,n);return t[0](r)}}(f,n,ct);function t(){return n.click_handler(n)}return{c:function(){r=x("div"),i=x("img"),s=z(),h&&h.c(),a=z(),E(i,"src",o=n.image.src),E(i,"alt",c=n.image.alt),E(i,"class","svelte-s02v9z"),E(r,"class","image-masonry-item svelte-s02v9z"),E(r,"style",u=lt(n.image)),e=function(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}(r,"click",t)},l:function(t){h&&h.l(div_nodes)},m:function(t,e){$(t,r,e),w(r,i),w(r,s),h&&h.m(r,null),w(r,a),l=!0},p:function(t,e){n=e,l&&!t.scaledImages||o===(o=n.image.src)||E(i,"src",o),l&&!t.scaledImages||c===(c=n.image.alt)||E(i,"alt",c),h&&h.p&&(t.$$scope||t.scaledImages)&&h.p(function(t,e,n,r){return t[1]?d({},d(e.$$scope.changed||{},t[1](r?r(n):{}))):e.$$scope.changed||{}}(f,n,t,ot),b(f,n,ct)),l&&!t.scaledImages||u===(u=lt(n.image))||E(r,"style",u)},i:function(t){l||(B(h,t),l=!0)},o:function(t){q(h,t),l=!1},d:function(t){t&&j(r),h&&h.d(t),e()}}}function ut(r){for(var i,o,c=r.scaledImages,s=[],t=0;t<c.length;t+=1)s[t]=at(st(r,c,t));function a(t){return q(s[t],1,1,function(){s[t]=null})}return{c:function(){i=x("div");for(var t=0;t<s.length;t+=1)s[t].c();E(i,"class","image-masonry svelte-s02v9z")},m:function(t,e){$(t,i,e);for(var n=0;n<s.length;n+=1)s[n].m(i,null);r.div_binding(i),o=!0},p:function(t,e){if(t.makeStyle||t.scaledImages||t.$$scope){var n;for(c=e.scaledImages,n=0;n<c.length;n+=1){var r=st(e,c,n);s[n]?(s[n].p(t,r),B(s[n],1)):(s[n]=at(r),s[n].c(),B(s[n],1),s[n].m(i,null))}for(M={r:0,c:[],p:M},n=c.length;n<s.length;n+=1)a(n);M.r||v(M.c),M=M.p}},i:function(t){if(!o){for(var e=0;e<c.length;e+=1)B(s[e]);o=!0}},o:function(t){s=s.filter(Boolean);for(var e=0;e<s.length;e+=1)q(s[e]);o=!1},d:function(t){t&&j(i),function(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(s,t),r.div_binding(null)}}}function lt(t){var e=t.scaledWidthPc,n=t.scaledHeight;return"width:".concat(e,"%; height:").concat(n,"px")}function ft(t,e,n){function r(t){c("image-click",{image:a[t],index:t})}var i,o,c=P(),s=e.images,a=void 0===s?[]:s,u=e.targetRowHeight,l=void 0===u?200:u,f=[];R(function(){return n("width",o=i.getBoundingClientRect().width),rt(i,function(){Math.round(o)!==Math.round(i.getBoundingClientRect().width)&&n("width",o=i.getBoundingClientRect().width)}),function(){return it(i)}});var h=e.$$slots,g=void 0===h?{}:h,d=e.$$scope;return t.$set=function(t){"images"in t&&n("images",a=t.images),"targetRowHeight"in t&&n("targetRowHeight",l=t.targetRowHeight),"$$scope"in t&&n("$$scope",d=t.$$scope)},t.$$.update=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{width:1,images:1,targetRowHeight:1};(t.width||t.images||t.targetRowHeight)&&o&&n("scaledImages",f=tt(a,o,l))},{onClick:r,images:a,targetRowHeight:l,element:i,scaledImages:f,click_handler:function(t){return r(t.index)},div_binding:function(t){S[t?"unshift":"push"](function(){n("element",i=t)})},$$slots:g,$$scope:d}}var ht=function(){function n(t){var e;return r(this,n),e=l(this,o(n).call(this)),document.getElementById("svelte-s02v9z-style")||function(){var t=x("style");t.id="svelte-s02v9z-style",t.textContent=".image-masonry.svelte-s02v9z{box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.image-masonry-item.svelte-s02v9z{box-sizing:border-box;position:relative;padding:1px\r\n}.image-masonry-item.svelte-s02v9z img.svelte-s02v9z{display:block;width:100%;height:100%}",w(document.head,t)}(),G(u(e),t,ft,ut,y,["images","targetRowHeight"]),e}return t(n,J),n}(),gt=[{src:"images/a-small.jpg",width:400,height:300},{src:"images/b-small.jpg",width:400,height:300},{src:"images/c-small.jpg",width:300,height:400},{src:"images/d-small.jpg",width:300,height:400},{src:"images/e-small.jpg",width:300,height:400},{src:"images/f-small.jpg",width:400,height:300},{src:"images/g-small.jpg",width:400,height:300},{src:"images/h-small.jpg",width:300,height:400},{src:"images/i-small.jpg",width:300,height:400},{src:"images/j-small.jpg",width:833,height:250},{src:"images/k-small.jpg",width:400,height:300},{src:"images/l-small.jpg",width:300,height:400},{src:"images/m-small.jpg",width:400,height:300},{src:"images/n-small.jpg",width:400,height:300},{src:"images/o-small.jpg",width:400,height:300},{src:"images/p-small.jpg",width:300,height:400},{src:"images/q-small.jpg",width:400,height:300},{src:"images/r-small.jpg",width:400,height:300},{src:"images/s-small.jpg",width:400,height:200},{src:"images/t-small.jpg",width:400,height:300},{src:"images/u-small.jpg",width:400,height:300},{src:"images/v-small.jpg",width:400,height:300},{src:"images/w-small.jpg",width:300,height:400},{src:"images/x-small.jpg",width:833,height:250},{src:"images/y-small.jpg",width:400,height:300},{src:"images/z-small.jpg",width:300,height:400},{src:"images/zz-small.jpg",width:400,height:300}];function dt(t){var n,r=new ht({props:{images:gt}});return{c:function(){r.$$.fragment.c()},m:function(t,e){N(r,t,e),n=!0},p:g,i:function(t){n||(B(r.$$.fragment,t),n=!0)},o:function(t){q(r.$$.fragment,t),n=!1},d:function(t){U(r,t)}}}return new(function(){function n(t){var e;return r(this,n),G(u(e=l(this,o(n).call(this))),t,null,dt,y,[]),e}return t(n,J),n}())({target:document.querySelector("#app")})});
//# sourceMappingURL=image-masonry-svelte.js.map
