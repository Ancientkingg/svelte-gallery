!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ImageMasonryExample=e()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function u(t){var n="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return c(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s(e,t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(){}function d(t,e){for(var n in e)t[n]=e[n];return t}function m(t){return t()}function g(){return Object.create(null)}function v(t){t.forEach(m)}function _(t){return"function"==typeof t}function y(t,e){return t!=t?e==e:t!==e||t&&"object"===n(t)||"function"==typeof t}function b(t,e,n){return t[1]?d({},d(e.$$scope.ctx,t[1](n?n(e):{}))):e.$$scope.ctx}function w(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function z(t){return document.createElement(t)}function L(){return function(t){return document.createTextNode(t)}(" ")}function E(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}var O;function k(t){O=t}function R(t){(function(){if(!O)throw new Error("Function called outside component initialization");return O})().$$.on_mount.push(t)}function j(){var o=O;return function(t,e){var n=o.$$.callbacks[t];if(n){var r=function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(t,e);n.slice().forEach(function(t){t.call(o,r)})}}}var P=[],A=[],T=[],S=[],F=Promise.resolve(),C=!1;function D(t){T.push(t)}function I(){var t=new Set;do{for(;P.length;){var e=P.shift();k(e),M(e.$$)}for(;A.length;)A.pop()();for(var n=0;n<T.length;n+=1){var r=T[n];t.has(r)||(r(),t.add(r))}T.length=0}while(P.length);for(;S.length;)S.pop()();C=!1}function M(t){t.fragment&&(t.update(t.dirty),v(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(D))}var H,W=new Set;function V(t,e){t&&t.i&&(W.delete(t),t.i(e))}function U(t,e,n,r){if(t&&t.o){if(W.has(t))return;W.add(t),H.c.push(function(){W.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function B(e,t,n){var r=e.$$,o=r.fragment,i=r.on_mount,s=r.on_destroy,c=r.after_update;o.m(t,n),D(function(){var t=i.map(m).filter(_);s?s.push.apply(s,h(t)):v(t),e.$$.on_mount=[]}),c.forEach(D)}function Z(t,e){t.$$.fragment&&(v(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function G(t,e){t.$$.dirty||(P.push(t),C||(C=!0,F.then(I)),t.$$.dirty=g()),t.$$.dirty[e]=!0}function N(r,t,e,n,o,i){var s=O;k(r);var c=t.props||{},u=r.$$={fragment:null,ctx:null,props:i,update:p,not_equal:o,bound:g(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:[]),callbacks:g(),dirty:null},a=!1;u.ctx=e?e(r,c,function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e;return u.ctx&&o(u.ctx[t],u.ctx[t]=n)&&(u.bound[t]&&u.bound[t](n),a&&G(r,t)),e}):c,u.update(),a=!0,v(u.before_update),u.fragment=n(u.ctx),t.target&&(t.hydrate?u.fragment.l(function(t){return Array.from(t.childNodes)}(t.target)):u.fragment.c(),t.intro&&V(r.$$.fragment),B(r,t.target,t.anchor),I()),k(s)}var q=function(){function t(){r(this,t)}return e(t,[{key:"$destroy",value:function(){Z(this,1),this.$destroy=p}},{key:"$on",value:function(t,e){var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}}},{key:"$set",value:function(){}}]),t}(),Q={single_source_shortest_paths:function(t,e,n){var r={},o={};o[e]=0;var i,s,c,u,a,l,h=new Y(function(t){return t.cost});for(h.push({value:e,cost:0});h.size();)for(var f in s=(i=h.pop()).value,c=i.cost,u=t(s)||{})a=c+u[f],l=o[f],(void 0===o[f]||a<l)&&(o[f]=a,h.push({value:f,cost:a}),r[f]=s);if(void 0!==o[n])return r;var p=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(p)},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e;r;)n.push(r),t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){var r=Q.single_source_shortest_paths(t,e,n);return Q.extract_shortest_path_from_predecessor_list(r,n)}};function Y(t){this.content=[],this.scoreFunction=t}function J(t,e){return e/t}function K(t,e){return t/e}function X(t,e,n){return function(t,e){return t*e}(e,J(t.reduce(function(t,e){return t+e.scaledWidth},0),n))}function tt(t,u,a,e,n){for(var l=3<arguments.length&&void 0!==e?e:8,r=4<arguments.length&&void 0!==n&&n,h=t.map(function(t){var e=J(t.width,t.height);return function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(i,!0).forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):f(i).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}({},t,{ratio:e,scaledWidth:K(a,e),scaledHeight:a,scaledWidthPc:0})}),o=Q.find_path(function(t){var e,n,r,o,i,s={};s[t=+t]=0;for(var c=t+1;c<h.length+1&&!(l<c-t);++c)s[""+c]=(e=t,n=c,r=u,o=a,void 0,i=X(h.slice(e,n),r,o),Math.pow(Math.abs(i-o),2));return s},"0",h.length),i=[],s=[],c=0;c<o.length;c++)o[c+1]&&function(){var t=h.slice(+o[c],+o[c+1]),e=X(t,u,a);t.forEach(function(t){t.scaledWidth=K(e,t.ratio),t.scaledHeight=e,t.scaledWidthPc=t.scaledWidth/u*100,s.push(t)}),i.push(t)}();return r?i:s}function et(n){var r=n.target||n.srcElement;r.__resizeRAF__&&cancelAnimationFrame(r.__resizeRAF__),r.__resizeRAF__=requestAnimationFrame(function(){var e=r.__resizeTrigger__,t=e&&e.__resizeListeners__;t&&t.forEach(function(t){t.call(e,n)})})}Y.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.sinkDown(0)),t},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]===t){var r=this.content.pop();return void(n!==e-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];0<t;){var n=Math.floor((t+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var o=2*(t+1),i=o-1,s=null;if(i<e){var c=this.content[i],u=this.scoreFunction(c);u<r&&(s=i)}if(o<e){var a=this.content[o];this.scoreFunction(a)<(null===s?r:u)&&(s=o)}if(null==s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};function nt(t,e){var n,r=this.document,o=r.attachEvent;if("undefined"!=typeof navigator&&(n=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!t.__resizeListeners__)if(t.__resizeListeners__=[],o)(t.__resizeTrigger__=t).attachEvent("onresize",et);else{"static"===getComputedStyle(t).position&&(t.style.position="relative");var i=t.__resizeTrigger__=r.createElement("object");i.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),i.setAttribute("class","resize-sensor"),i.setAttribute("tabindex","-1"),i.__resizeElement__=t,i.onload=function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",et)},i.type="text/html",n&&t.appendChild(i),i.data="about:blank",n||t.appendChild(i)}t.__resizeListeners__.push(e)}var rt="undefined"==typeof window?nt:nt.bind(window),ot=function(t,e){var n=document.attachEvent,r=t.__resizeListeners__||[];if(e){var o=r.indexOf(e);-1!==o&&r.splice(o,1)}else r=t.__resizeListeners__=[];if(!r.length){if(n)t.detachEvent("onresize",et);else if(t.__resizeTrigger__){var i=t.__resizeTrigger__.contentDocument,s=i&&i.defaultView;s&&(s.removeEventListener("resize",et),delete s.__resizeTrigger__),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)}delete t.__resizeListeners__}};rt.unbind=ot;var it=function(t){t.image;var e=t.scaledImages;t.index;return{image:e}},st=function(t){var e=t.image;t.scaledImages;return{image:e,index:t.index}};function ct(t,e,n){var r=Object.create(t);return r.image=e[n],r.index=n,r}function ut(n){var r,o,i,s,c,u,a,l,e,h=n.$$slots.default,f=function(t,e,n){if(t){var r=b(t,e,n);return t[0](r)}}(h,n,st);function t(){return n.click_handler(n)}return{c:function(){r=z("div"),o=z("img"),c=L(),f&&f.c(),u=L(),E(o,"src",i=n.image.src),E(o,"alt",s=n.image.alt),E(o,"class","svelte-s02v9z"),E(r,"class","image-masonry-item svelte-s02v9z"),E(r,"style",a=lt(n.image)),e=function(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}(r,"click",t)},l:function(t){f&&f.l(div_nodes)},m:function(t,e){$(t,r,e),w(r,o),w(r,c),f&&f.m(r,null),w(r,u),l=!0},p:function(t,e){n=e,l&&!t.scaledImages||i===(i=n.image.src)||E(o,"src",i),l&&!t.scaledImages||s===(s=n.image.alt)||E(o,"alt",s),f&&f.p&&(t.$$scope||t.scaledImages)&&f.p(function(t,e,n,r){return t[1]?d({},d(e.$$scope.changed||{},t[1](r?r(n):{}))):e.$$scope.changed||{}}(h,n,t,it),b(h,n,st)),l&&!t.scaledImages||a===(a=lt(n.image))||E(r,"style",a)},i:function(t){l||(V(f,t),l=!0)},o:function(t){U(f,t),l=!1},d:function(t){t&&x(r),f&&f.d(t),e()}}}function at(r){for(var o,i,s=r.scaledImages,c=[],t=0;t<s.length;t+=1)c[t]=ut(ct(r,s,t));function u(t){return U(c[t],1,1,function(){c[t]=null})}return{c:function(){o=z("div");for(var t=0;t<c.length;t+=1)c[t].c();E(o,"class","image-masonry svelte-s02v9z")},m:function(t,e){$(t,o,e);for(var n=0;n<c.length;n+=1)c[n].m(o,null);r.div_binding(o),i=!0},p:function(t,e){if(t.makeStyle||t.scaledImages||t.$$scope){var n;for(s=e.scaledImages,n=0;n<s.length;n+=1){var r=ct(e,s,n);c[n]?(c[n].p(t,r),V(c[n],1)):(c[n]=ut(r),c[n].c(),V(c[n],1),c[n].m(o,null))}for(H={r:0,c:[],p:H},n=s.length;n<c.length;n+=1)u(n);H.r||v(H.c),H=H.p}},i:function(t){if(!i){for(var e=0;e<s.length;e+=1)V(c[e]);i=!0}},o:function(t){c=c.filter(Boolean);for(var e=0;e<c.length;e+=1)U(c[e]);i=!1},d:function(t){t&&x(o),function(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(c,t),r.div_binding(null)}}}function lt(t){var e=t.scaledWidthPc,n=t.scaledHeight;return"width:".concat(e,"%; height:").concat(n,"px")}function ht(t,e,n){function r(t){s("image-click",{image:u[t],index:t})}var o,i,s=j(),c=e.images,u=void 0===c?[]:c,a=e.targetRowHeight,l=void 0===a?200:a,h=[];R(function(){return n("width",i=o.getBoundingClientRect().width),rt(o,function(){Math.round(i)!==Math.round(o.getBoundingClientRect().width)&&n("width",i=o.getBoundingClientRect().width)}),function(){return ot(o)}});var f=e.$$slots,p=void 0===f?{}:f,d=e.$$scope;return t.$set=function(t){"images"in t&&n("images",u=t.images),"targetRowHeight"in t&&n("targetRowHeight",l=t.targetRowHeight),"$$scope"in t&&n("$$scope",d=t.$$scope)},t.$$.update=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{width:1,images:1,targetRowHeight:1};(t.width||t.images||t.targetRowHeight)&&i&&n("scaledImages",h=tt(u,i,l))},{onClick:r,images:u,targetRowHeight:l,element:o,scaledImages:h,click_handler:function(t){return r(t.index)},div_binding:function(t){A[t?"unshift":"push"](function(){n("element",o=t)})},$$slots:p,$$scope:d}}var ft=function(){function n(t){var e;return r(this,n),e=l(this,i(n).call(this)),document.getElementById("svelte-s02v9z-style")||function(){var t=z("style");t.id="svelte-s02v9z-style",t.textContent=".image-masonry.svelte-s02v9z{box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.image-masonry-item.svelte-s02v9z{box-sizing:border-box;position:relative;padding:1px\r\n}.image-masonry-item.svelte-s02v9z img.svelte-s02v9z{display:block;width:100%;height:100%}",w(document.head,t)}(),N(a(e),t,ht,at,y,["images","targetRowHeight"]),e}return t(n,q),n}(),pt=[{src:"https://source.unsplash.com/V6TWE6h8gyg/800x600",width:800,height:600,title:"Lorem ipsum dolor sit amet, consectetur adipiscing elit"},{src:"https://source.unsplash.com/dtaPArYUDg4/800x600",width:800,height:600,title:"Lorem ipsum dolor sit amet"},{src:"https://source.unsplash.com/R_kik2MoltU/600x799",width:600,height:799,title:"Lorem ipsum"},{src:"https://source.unsplash.com/8LPgWfHgcMg/600x799",width:600,height:799,title:"Lorem ipsum dolor sit amet"},{src:"https://source.unsplash.com/mC_puQe4V3g/600x800",width:600,height:800,title:"Lorem ipsum"},{src:"https://source.unsplash.com/_LuLiJc1cdo/800x600",width:800,height:600,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/v7daTKlZzaw/800x599",width:800,height:599,title:"Lorem ipsum"},{src:"https://source.unsplash.com/s7qZayMy6Go/600x799",width:600,height:799,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/rB-4G58XFt0/600x800",width:600,height:800,title:"Lorem ipsum"},{src:"https://source.unsplash.com/fg6g2u5oklo/1000x300",width:1e3,height:400,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/eVwzKfnEGDg/800x600",width:800,height:600,title:"Lorem ipsum"},{src:"https://source.unsplash.com/F_eLtGyrlNY/600x800",width:600,height:800,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/9270-pFGVTU/800x600",width:800,height:600,title:"Lorem ipsum"},{src:"https://source.unsplash.com/R4y_E5ZQDPg/800x599",width:800,height:599,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/-QTa5xYxDCs/800x599",width:800,height:599,title:"Lorem ipsum"},{src:"https://source.unsplash.com/Sfs_64L9UHE/600x800",width:600,height:800,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/pR166OP_l6g/800x600",width:800,height:600,title:"Lorem ipsum"},{src:"https://source.unsplash.com/hlvtJ4JkVfc/800x600",width:800,height:600,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/AUYr7ptqSRQ/800x400",width:800,height:400,title:"Lorem ipsum"},{src:"https://source.unsplash.com/E7PlRr9ZfoM/800x600",width:800,height:600,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/GhlotfzelR4/800x600",width:800,height:600,title:"Lorem ipsum"},{src:"https://source.unsplash.com/Xvlc79bu9MA/800x600",width:800,height:600,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/txRO7-0I8wU/600x800",width:600,height:800,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/e2uTOpgW5Ec/1000x300",width:1e3,height:300,title:"Lorem ipsum"},{src:"https://source.unsplash.com/5BsNkTMbZZ0/800x600",width:800,height:600,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/_31y-mxvRWI/600x800",width:600,height:800,title:"Lorem ipsum dolor"},{src:"https://source.unsplash.com/VrrZAVkzfWE/800x600",width:800,height:600,title:"Lorem ipsum"}];function dt(t){var n,r=new ft({props:{images:pt}});return{c:function(){r.$$.fragment.c()},m:function(t,e){B(r,t,e),n=!0},p:p,i:function(t){n||(V(r.$$.fragment,t),n=!0)},o:function(t){U(r.$$.fragment,t),n=!1},d:function(t){Z(r,t)}}}return new(function(){function n(t){var e;return r(this,n),N(a(e=l(this,i(n).call(this))),t,null,dt,y,[]),e}return t(n,q),n}())({target:document.querySelector("#app")})});
//# sourceMappingURL=image-masonry-svelte.js.map
