!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ImageMasonryExample=e()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&c(o,n.prototype),o}).apply(null,arguments)}function u(t){var n="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return s(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),c(e,t)})(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(){}function g(t){return t()}function d(){return Object.create(null)}function m(t){t.forEach(g)}function v(t){return"function"==typeof t}function _(t,e){return t!=t?e==e:t!==e||t&&"object"===n(t)||"function"==typeof t}function y(t,e){t.appendChild(e)}function w(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function $(){return function(t){return document.createTextNode(t)}(" ")}function E(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}function O(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}var R;function z(t){R=t}function k(t){(function(){if(!R)throw new Error("Function called outside component initialization");return R})().$$.on_mount.push(t)}function j(){var o=R;return function(t,e){var n=o.$$.callbacks[t];if(n){var r=function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(t,e);n.slice().forEach(function(t){t.call(o,r)})}}}var C=[],P=[],A=[],H=[],T=Promise.resolve(),S=!1;function F(t){A.push(t)}function M(){var t=new Set;do{for(;C.length;){var e=C.shift();z(e),D(e.$$)}for(;P.length;)P.pop()();for(var n=0;n<A.length;n+=1){var r=A[n];t.has(r)||(r(),t.add(r))}A.length=0}while(C.length);for(;H.length;)H.pop()();S=!1}function D(t){t.fragment&&(t.update(t.dirty),m(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(F))}var L,I=new Set;function W(t,e){t&&t.i&&(I.delete(t),t.i(e))}function V(e,t,n){var r=e.$$,o=r.fragment,i=r.on_mount,c=r.on_destroy,s=r.after_update;o.m(t,n),F(function(){var t=i.map(g).filter(v);c?c.push.apply(c,l(t)):m(t),e.$$.on_mount=[]}),s.forEach(F)}function U(t,e){t.$$.fragment&&(m(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function B(t,e){t.$$.dirty||(C.push(t),S||(S=!0,T.then(M)),t.$$.dirty=d()),t.$$.dirty[e]=!0}function Z(r,t,e,n,o,i){var c=R;z(r);var s=t.props||{},u=r.$$={fragment:null,ctx:null,props:i,update:p,not_equal:o,bound:d(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:d(),dirty:null},a=!1;u.ctx=e?e(r,s,function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e;return u.ctx&&o(u.ctx[t],u.ctx[t]=n)&&(u.bound[t]&&u.bound[t](n),a&&B(r,t)),e}):s,u.update(),a=!0,m(u.before_update),u.fragment=n(u.ctx),t.target&&(t.hydrate?u.fragment.l(function(t){return Array.from(t.childNodes)}(t.target)):u.fragment.c(),t.intro&&W(r.$$.fragment),V(r,t.target,t.anchor),M()),z(c)}var G=function(){function t(){r(this,t)}return e(t,[{key:"$destroy",value:function(){U(this,1),this.$destroy=p}},{key:"$on",value:function(t,e){var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}}},{key:"$set",value:function(){}}]),t}(),N={single_source_shortest_paths:function(t,e,n){var r={},o={};o[e]=0;var i,c,s,u,a,h,l=new q(function(t){return t.cost});for(l.push({value:e,cost:0});l.size();)for(var f in c=(i=l.pop()).value,s=i.cost,u=t(c)||{})a=s+u[f],h=o[f],(void 0===o[f]||a<h)&&(o[f]=a,l.push({value:f,cost:a}),r[f]=c);if(void 0!==o[n])return r;var p=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(p)},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e;r;)n.push(r),t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){var r=N.single_source_shortest_paths(t,e,n);return N.extract_shortest_path_from_predecessor_list(r,n)}};function q(t){this.content=[],this.scoreFunction=t}function Q(t,e){return e/t}function Y(t,e){return t/e}function J(t,e,n){return function(t,e){return t*e}(e,Q(t.reduce(function(t,e){return t+e.scaledWidth},0),n))}function K(t,u,a,e,n){for(var h=3<arguments.length&&void 0!==e?e:8,r=4<arguments.length&&void 0!==n&&n,l=t.map(function(t){var e=Q(t.width,t.height);return function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(i,!0).forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):f(i).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}({},t,{ratio:e,scaledWidth:Y(a,e),scaledHeight:a,scaledWidthPc:0})}),o=N.find_path(function(t){var e,n,r,o,i,c={};c[t=+t]=0;for(var s=t+1;s<l.length+1&&!(h<s-t);++s)c[""+s]=(e=t,n=s,r=u,o=a,void 0,i=J(l.slice(e,n),r,o),Math.pow(Math.abs(i-o),2));return c},"0",l.length),i=[],c=[],s=0;s<o.length;s++)o[s+1]&&function(){var t=l.slice(+o[s],+o[s+1]),e=J(t,u,a);t.forEach(function(t){t.scaledWidth=Y(e,t.ratio),t.scaledHeight=e,t.scaledWidthPc=t.scaledWidth/u*100,c.push(t)}),i.push(t)}();return r?i:c}function X(n){var r=n.target||n.srcElement;r.__resizeRAF__&&cancelAnimationFrame(r.__resizeRAF__),r.__resizeRAF__=requestAnimationFrame(function(){var e=r.__resizeTrigger__,t=e&&e.__resizeListeners__;t&&t.forEach(function(t){t.call(e,n)})})}q.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.sinkDown(0)),t},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]===t){var r=this.content.pop();return void(n!==e-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];0<t;){var n=Math.floor((t+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var o=2*(t+1),i=o-1,c=null;if(i<e){var s=this.content[i],u=this.scoreFunction(s);u<r&&(c=i)}if(o<e){var a=this.content[o];this.scoreFunction(a)<(null===c?r:u)&&(c=o)}if(null==c)break;this.content[t]=this.content[c],this.content[c]=n,t=c}}};function tt(t,e){var n,r=this.document,o=r.attachEvent;if("undefined"!=typeof navigator&&(n=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!t.__resizeListeners__)if(t.__resizeListeners__=[],o)(t.__resizeTrigger__=t).attachEvent("onresize",X);else{"static"===getComputedStyle(t).position&&(t.style.position="relative");var i=t.__resizeTrigger__=r.createElement("object");i.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),i.setAttribute("class","resize-sensor"),i.setAttribute("tabindex","-1"),i.__resizeElement__=t,i.onload=function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",X)},i.type="text/html",n&&t.appendChild(i),i.data="about:blank",n||t.appendChild(i)}t.__resizeListeners__.push(e)}var et="undefined"==typeof window?tt:tt.bind(window),nt=function(t,e){var n=document.attachEvent,r=t.__resizeListeners__||[];if(e){var o=r.indexOf(e);-1!==o&&r.splice(o,1)}else r=t.__resizeListeners__=[];if(!r.length){if(n)t.detachEvent("onresize",X);else if(t.__resizeTrigger__){var i=t.__resizeTrigger__.contentDocument,c=i&&i.defaultView;c&&(c.removeEventListener("resize",X),delete c.__resizeTrigger__),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)}delete t.__resizeListeners__}};function rt(t,e,n){var r=Object.create(t);return r.image=e[n],r.index=n,r}function ot(n){var r,o,i,c,s,u,e;function t(){return n.click_handler(n)}return{c:function(){r=x("div"),o=x("img"),s=$(),O(o,"src",i=n.image.src),O(o,"alt",c=n.image.alt),O(o,"class","svelte-16ixl9o"),O(r,"class","image-masonry-item svelte-16ixl9o"),O(r,"style",u=ct(n.image)),e=E(r,"click",t)},m:function(t,e){w(t,r,e),y(r,o),y(r,s)},p:function(t,e){n=e,t.scaledImages&&i!==(i=n.image.src)&&O(o,"src",i),t.scaledImages&&c!==(c=n.image.alt)&&O(o,"alt",c),t.scaledImages&&u!==(u=ct(n.image))&&O(r,"style",u)},d:function(t){t&&b(r),e()}}}function it(r){for(var o,i=r.scaledImages,c=[],t=0;t<i.length;t+=1)c[t]=ot(rt(r,i,t));return{c:function(){o=x("div");for(var t=0;t<c.length;t+=1)c[t].c();O(o,"class","image-masonry svelte-16ixl9o")},m:function(t,e){w(t,o,e);for(var n=0;n<c.length;n+=1)c[n].m(o,null);r.div_binding(o)},p:function(t,e){if(t.makeStyle||t.scaledImages){var n;for(i=e.scaledImages,n=0;n<i.length;n+=1){var r=rt(e,i,n);c[n]?c[n].p(t,r):(c[n]=ot(r),c[n].c(),c[n].m(o,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=i.length}},i:p,o:p,d:function(t){t&&b(o),function(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(c,t),r.div_binding(null)}}}function ct(t){var e=t.scaledWidthPc,n=t.scaledHeight;return"width:".concat(e,"%; height:").concat(n,"px")}function st(t,e,n){function r(t){c("image-click",u[t])}var o,i,c=j(),s=e.images,u=void 0===s?[]:s,a=e.targetRowHeight,h=void 0===a?200:a,l=[];k(function(){return n("width",i=o.getBoundingClientRect().width),et(o,function(){Math.round(i)!==Math.round(o.getBoundingClientRect().width)&&n("width",i=o.getBoundingClientRect().width)}),function(){return nt(o)}});return t.$set=function(t){"images"in t&&n("images",u=t.images),"targetRowHeight"in t&&n("targetRowHeight",h=t.targetRowHeight)},t.$$.update=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{width:1,images:1,targetRowHeight:1};(t.width||t.images||t.targetRowHeight)&&i&&n("scaledImages",l=K(u,i,h))},{onClick:r,images:u,targetRowHeight:h,element:o,scaledImages:l,click_handler:function(t){return r(t.index)},div_binding:function(t){P[t?"unshift":"push"](function(){n("element",o=t)})}}}et.unbind=nt;var ut=function(){function n(t){var e;return r(this,n),e=h(this,i(n).call(this)),document.getElementById("svelte-16ixl9o-style")||function(){var t=x("style");t.id="svelte-16ixl9o-style",t.textContent=".image-masonry.svelte-16ixl9o{box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.image-masonry-item.svelte-16ixl9o{box-sizing:border-box;padding:1px\r\n}.image-masonry-item.svelte-16ixl9o img.svelte-16ixl9o{display:block;width:100%;height:100%}",y(document.head,t)}(),Z(a(e),t,st,it,_,["images","targetRowHeight"]),e}return t(n,G),n}(),at=[{src:"https://source.unsplash.com/V6TWE6h8gyg/800x600",width:800,height:600},{src:"https://source.unsplash.com/dtaPArYUDg4/800x600",width:800,height:600},{src:"https://source.unsplash.com/R_kik2MoltU/600x799",width:600,height:799},{src:"https://source.unsplash.com/8LPgWfHgcMg/600x799",width:600,height:799},{src:"https://source.unsplash.com/mC_puQe4V3g/600x800",width:600,height:800},{src:"https://source.unsplash.com/_LuLiJc1cdo/800x600",width:800,height:600},{src:"https://source.unsplash.com/v7daTKlZzaw/800x599",width:800,height:599},{src:"https://source.unsplash.com/s7qZayMy6Go/600x799",width:600,height:799},{src:"https://source.unsplash.com/rB-4G58XFt0/600x800",width:600,height:800},{src:"https://source.unsplash.com/fg6g2u5oklo/1000x300",width:1e3,height:400},{src:"https://source.unsplash.com/eVwzKfnEGDg/800x600",width:800,height:600},{src:"https://source.unsplash.com/F_eLtGyrlNY/600x800",width:600,height:800},{src:"https://source.unsplash.com/9270-pFGVTU/800x600",width:800,height:600},{src:"https://source.unsplash.com/R4y_E5ZQDPg/800x599",width:800,height:599},{src:"https://source.unsplash.com/-QTa5xYxDCs/800x599",width:800,height:599},{src:"https://source.unsplash.com/Sfs_64L9UHE/600x800",width:600,height:800},{src:"https://source.unsplash.com/pR166OP_l6g/800x600",width:800,height:600},{src:"https://source.unsplash.com/hlvtJ4JkVfc/800x600",width:800,height:600},{src:"https://source.unsplash.com/AUYr7ptqSRQ/800x400",width:800,height:400},{src:"https://source.unsplash.com/E7PlRr9ZfoM/800x600",width:800,height:600},{src:"https://source.unsplash.com/GhlotfzelR4/800x600",width:800,height:600},{src:"https://source.unsplash.com/Xvlc79bu9MA/800x600",width:800,height:600},{src:"https://source.unsplash.com/txRO7-0I8wU/600x800",width:600,height:800},{src:"https://source.unsplash.com/e2uTOpgW5Ec/1000x300",width:1e3,height:300},{src:"https://source.unsplash.com/5BsNkTMbZZ0/800x600",width:800,height:600},{src:"https://source.unsplash.com/_31y-mxvRWI/600x800",width:600,height:800},{src:"https://source.unsplash.com/VrrZAVkzfWE/800x600",width:800,height:600}];function ht(t){var n,r,o,i,c,e,s=new ut({props:{images:t.images,targetRowHeight:t.targetRowHeight}});return s.$on("image-click",lt),{c:function(){(n=x("button")).textContent="Change images",r=$(),(o=x("button")).textContent="Change row height",i=$(),s.$$.fragment.c(),O(n,"type","button"),O(o,"type","button"),e=[E(n,"click",t.onChangeImages),E(o,"click",t.onChangeRowHeight)]},m:function(t,e){w(t,n,e),w(t,r,e),w(t,o,e),w(t,i,e),V(s,t,e),c=!0},p:function(t,e){var n={};t.images&&(n.images=e.images),t.targetRowHeight&&(n.targetRowHeight=e.targetRowHeight),s.$set(n)},i:function(t){c||(W(s.$$.fragment,t),c=!0)},o:function(t){!function(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),L.c.push(function(){I.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}(s.$$.fragment,t),c=!1},d:function(t){t&&(b(n),b(r),b(o),b(i)),U(s,t),m(e)}}}function lt(t){console.log(t)}function ft(t,e,n){var r=at,o=200;return{images:r,targetRowHeight:o,onChangeImages:function(){var t=l(at);!function(t){for(var e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}}(t),n("images",r=t)},onChangeRowHeight:function(){n("targetRowHeight",o+=20)}}}return new(function(){function n(t){var e;return r(this,n),Z(a(e=h(this,i(n).call(this))),t,ft,ht,_,[]),e}return t(n,G),n}())({target:document.querySelector("#app")})});
//# sourceMappingURL=image-masonry-svelte.js.map
