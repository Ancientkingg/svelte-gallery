{"version":3,"file":"image-masonry-vue.js","sources":["../src/images.js","../../src/common/dijkstra.js","../../src/common/utils.js","../../src/common/justified-layout.js","../../node_modules/element-resize-event/index.js","../../src/vue/lazy-image.vue?rollup-plugin-vue=script.js","../../src/common/when-element-visible.js","../../node_modules/vue-runtime-helpers/dist/normalize-component.js","../../node_modules/vue-runtime-helpers/dist/inject-style/browser.js","../../src/vue/image-masonry.vue?rollup-plugin-vue=script.js","../src/vue/basic.vue?rollup-plugin-vue=script.js"],"sourcesContent":["export default [{\r\n  src: 'images/a-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/b-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/c-small.jpg',\r\n  width: 300,\r\n  height: 400\r\n},\r\n{\r\n  src: 'images/d-small.jpg',\r\n  width: 300,\r\n  height: 400\r\n},\r\n{\r\n  src: 'images/e-small.jpg',\r\n  width: 300,\r\n  height: 400\r\n},\r\n{\r\n  src: 'images/f-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/g-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/h-small.jpg',\r\n  width: 300,\r\n  height: 400\r\n},\r\n{\r\n  src: 'images/i-small.jpg',\r\n  width: 300,\r\n  height: 400\r\n},\r\n{\r\n  src: 'images/j-small.jpg',\r\n  width: 833,\r\n  height: 250\r\n},\r\n{\r\n  src: 'images/k-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/l-small.jpg',\r\n  width: 300,\r\n  height: 400\r\n},\r\n{\r\n  src: 'images/m-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/n-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/o-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/p-small.jpg',\r\n  width: 300,\r\n  height: 400\r\n},\r\n{\r\n  src: 'images/q-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/r-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/s-small.jpg',\r\n  width: 400,\r\n  height: 200\r\n},\r\n{\r\n  src: 'images/t-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/u-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/v-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/w-small.jpg',\r\n  width: 300,\r\n  height: 400\r\n},\r\n{\r\n  src: 'images/x-small.jpg',\r\n  width: 833,\r\n  height: 250\r\n},\r\n{\r\n  src: 'images/y-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n},\r\n{\r\n  src: 'images/z-small.jpg',\r\n  width: 300,\r\n  height: 400\r\n},\r\n{\r\n  src: 'images/zz-small.jpg',\r\n  width: 400,\r\n  height: 300\r\n}];\r\n","/******************************************************************************\r\n * Created 2008-08-19.\r\n *\r\n * Dijkstra path-finding functions. Adapted from the Dijkstar Python project.\r\n *\r\n * Copyright (C) 2008\r\n *   Wyatt Baldwin <self@wyattbaldwin.com>\r\n *   All rights reserved\r\n *\r\n * Licensed under the MIT license.\r\n *\r\n *   http://www.opensource.org/licenses/mit-license.php\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n *****************************************************************************/\r\nexport const dijkstra = {\r\n  single_source_shortest_paths: function(graph, s, d) {\r\n    // Predecessor map for each node that has been encountered.\r\n    // node ID => predecessor node ID\r\n    var predecessors = {};\r\n\r\n    // Costs of shortest paths from s to all nodes encountered.\r\n    // node ID => cost\r\n    var costs = {};\r\n    costs[s] = 0;\r\n\r\n    // Costs of shortest paths from s to all nodes encountered; differs from\r\n    // `costs` in that it provides easy access to the node that currently has\r\n    // the known shortest path from s.\r\n    // XXX: Do we actually need both `costs` and `open`?\r\n    var open = new BinaryHeap(function (x) { return x.cost; });\r\n    open.push({value: s, cost: 0});\r\n\r\n    var closest,\r\n        u,\r\n        cost_of_s_to_u,\r\n        adjacent_nodes,\r\n        cost_of_e,\r\n        cost_of_s_to_u_plus_cost_of_e,\r\n        cost_of_s_to_v,\r\n        first_visit;\r\n    while (open.size()) {\r\n      // In the nodes remaining in graph that have a known cost from s,\r\n      // find the node, u, that currently has the shortest path from s.\r\n      closest = open.pop();\r\n      u = closest.value;\r\n      cost_of_s_to_u = closest.cost;\r\n\r\n      // Get nodes adjacent to u...\r\n      adjacent_nodes = graph(u) || {};\r\n\r\n      // ...and explore the edges that connect u to those nodes, updating\r\n      // the cost of the shortest paths to any or all of those nodes as\r\n      // necessary. v is the node across the current edge from u.\r\n      for (var v in adjacent_nodes) {\r\n        // Get the cost of the edge running from u to v.\r\n        cost_of_e = adjacent_nodes[v];\r\n\r\n        // Cost of s to u plus the cost of u to v across e--this is *a*\r\n        // cost from s to v that may or may not be less than the current\r\n        // known cost to v.\r\n        cost_of_s_to_u_plus_cost_of_e = cost_of_s_to_u + cost_of_e;\r\n\r\n        // If we haven't visited v yet OR if the current known cost from s to\r\n        // v is greater than the new cost we just found (cost of s to u plus\r\n        // cost of u to v across e), update v's cost in the cost list and\r\n        // update v's predecessor in the predecessor list (it's now u).\r\n        cost_of_s_to_v = costs[v];\r\n        first_visit = (typeof costs[v] === 'undefined');\r\n        if (first_visit || cost_of_s_to_v > cost_of_s_to_u_plus_cost_of_e) {\r\n          costs[v] = cost_of_s_to_u_plus_cost_of_e;\r\n          open.push({value: v, cost: cost_of_s_to_u_plus_cost_of_e});\r\n          predecessors[v] = u;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (typeof costs[d] === 'undefined') {\r\n      var msg = ['Could not find a path from ', s, ' to ', d, '.'].join('');\r\n      throw new Error(msg);\r\n    }\r\n\r\n    return predecessors;\r\n  },\r\n\r\n  extract_shortest_path_from_predecessor_list: function(predecessors, d) {\r\n    var nodes = [];\r\n    var u = d;\r\n    var predecessor;\r\n    while (u) {\r\n      nodes.push(u);\r\n      predecessor = predecessors[u];\r\n      u = predecessors[u];\r\n    }\r\n    nodes.reverse();\r\n    return nodes;\r\n  },\r\n\r\n  find_path: function(graph, s, d) {\r\n    var predecessors = dijkstra.single_source_shortest_paths(graph, s, d);\r\n    return dijkstra.extract_shortest_path_from_predecessor_list(\r\n      predecessors, d);\r\n  },\r\n\r\n  // test: function() {\r\n  //   // A B C\r\n  //   // D E F\r\n  //   // G H I\r\n  //   graph = function (key) {\r\n  //     switch (key) {\r\n  //       case 'a': return {b: 10, d: 1};\r\n  //       case 'b': return {a: 1, c: 1, e: 1};\r\n  //       case 'c': return {b: 1, f: 1};\r\n  //       case 'd': return {a: 1, e: 1, g: 1};\r\n  //       case 'e': return {b: 1, d: 1, f: 1, h: 1};\r\n  //       case 'f': return {c: 1, e: 1, i: 1};\r\n  //       case 'g': return {d: 1, h: 1};\r\n  //       case 'h': return {e: 1, g: 1, i: 1};\r\n  //       case 'i': return {f: 1, h: 1};\r\n  //     }\r\n  //   };\r\n  //   var path = dijkstra.find_path(graph, 'a', 'i');\r\n  //   if (path.join() !== ['a', 'd', 'e', 'f', 'i'].join()) {\r\n  //     throw new Error('Path finding error!');\r\n  //   }\r\n  // }\r\n};\r\n\r\nfunction BinaryHeap(scoreFunction){\r\n  this.content = [];\r\n  this.scoreFunction = scoreFunction;\r\n}\r\n\r\nBinaryHeap.prototype = {\r\n  push: function(element) {\r\n    // Add the new element to the end of the array.\r\n    this.content.push(element);\r\n    // Allow it to bubble up.\r\n    this.bubbleUp(this.content.length - 1);\r\n  },\r\n\r\n  pop: function() {\r\n    // Store the first element so we can return it later.\r\n    var result = this.content[0];\r\n    // Get the element at the end of the array.\r\n    var end = this.content.pop();\r\n    // If there are any elements left, put the end element at the\r\n    // start, and let it sink down.\r\n    if (this.content.length > 0) {\r\n      this.content[0] = end;\r\n      this.sinkDown(0);\r\n    }\r\n    return result;\r\n  },\r\n\r\n  remove: function(node) {\r\n    var len = this.content.length;\r\n    // To remove a value, we must search through the array to find\r\n    // it.\r\n    for (var i = 0; i < len; i++) {\r\n      if (this.content[i] === node) {\r\n        // When it is found, the process seen in 'pop' is repeated\r\n        // to fill up the hole.\r\n        var end = this.content.pop();\r\n        if (i !== len - 1) {\r\n          this.content[i] = end;\r\n          if (this.scoreFunction(end) < this.scoreFunction(node))\r\n            this.bubbleUp(i);\r\n          else\r\n            this.sinkDown(i);\r\n        }\r\n        return;\r\n      }\r\n    }\r\n    throw new Error(\"Node not found.\");\r\n  },\r\n\r\n  size: function() {\r\n    return this.content.length;\r\n  },\r\n\r\n  bubbleUp: function(n) {\r\n    // Fetch the element that has to be moved.\r\n    var element = this.content[n];\r\n    // When at 0, an element can not go up any further.\r\n    while (n > 0) {\r\n      // Compute the parent element's index, and fetch it.\r\n      var parentN = Math.floor((n + 1) / 2) - 1,\r\n          parent = this.content[parentN];\r\n      // Swap the elements if the parent is greater.\r\n      if (this.scoreFunction(element) < this.scoreFunction(parent)) {\r\n        this.content[parentN] = element;\r\n        this.content[n] = parent;\r\n        // Update 'n' to continue at the new position.\r\n        n = parentN;\r\n      }\r\n      // Found a parent that is less, no need to move it further.\r\n      else {\r\n        break;\r\n      }\r\n    }\r\n  },\r\n\r\n  sinkDown: function(n) {\r\n    // Look up the target element and its score.\r\n    var length = this.content.length,\r\n        element = this.content[n],\r\n        elemScore = this.scoreFunction(element);\r\n\r\n    while(true) {\r\n      // Compute the indices of the child elements.\r\n      var child2N = (n + 1) * 2, child1N = child2N - 1;\r\n      // This is used to store the new position of the element,\r\n      // if any.\r\n      var swap = null;\r\n      // If the first child exists (is inside the array)...\r\n      if (child1N < length) {\r\n        // Look it up and compute its score.\r\n        var child1 = this.content[child1N],\r\n            child1Score = this.scoreFunction(child1);\r\n        // If the score is less than our element's, we need to swap.\r\n        if (child1Score < elemScore)\r\n          swap = child1N;\r\n      }\r\n      // Do the same checks for the other child.\r\n      if (child2N < length) {\r\n        var child2 = this.content[child2N],\r\n            child2Score = this.scoreFunction(child2);\r\n        if (child2Score < (swap === null ? elemScore : child1Score))\r\n          swap = child2N;\r\n      }\r\n\r\n      // If the element needs to be moved, swap it, and continue.\r\n      if (swap != null) {\r\n        this.content[n] = this.content[swap];\r\n        this.content[swap] = element;\r\n        n = swap;\r\n      }\r\n      // Otherwise, we are done.\r\n      else {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n};\r\n","if (Number.EPSILON === undefined) {\r\n  Number.EPSILON = Math.pow(2, -52);\r\n}\r\n\r\nexport function round(n) {\r\n  return Math.round(n * 100 + Number.EPSILON) / 100\r\n}\r\n\r\nexport function ratio(width, height) {\r\n  return round(width / height);\r\n}\r\n\r\nexport function scaleHeight(width, ratio) {\r\n  return round(width / ratio);\r\n}\r\n\r\nexport function scaleWidth(height, ratio) {\r\n  return round(height * ratio);\r\n}\r\n\r\nexport function debounce (fn, delay) {\r\n  let timeoutID = null\r\n  return function () {\r\n    clearTimeout(timeoutID)\r\n    const args = arguments\r\n    const that = this\r\n    timeoutID = setTimeout(function () {\r\n      fn.apply(that, args)\r\n    }, delay)\r\n  }\r\n}\r\n","import { dijkstra } from './dijkstra';\r\nimport { round, ratio, scaleHeight, scaleWidth } from '../common/utils';\r\n\r\nfunction getRowHeight(row, containerWidth, padding) {\r\n  const rowWidth = containerWidth - (row.length - 1) * (padding);\r\n  const rowAspectRatio = row.reduce((acc, { ratio }) => acc + ratio, 0);\r\n  return scaleHeight(rowWidth, rowAspectRatio);\r\n}\r\n\r\nfunction cost(images, start, end, containerWidth, targetHeight, padding) {\r\n  const row = images.slice(start, end);\r\n  const rowHeight = getRowHeight(row, containerWidth, padding);\r\n  return Math.pow(Math.abs(rowHeight - targetHeight), 2);\r\n}\r\n\r\nfunction calcSeekLimit(containerWidth, targetRowHeight) {\r\n  if (containerWidth < 420) {\r\n    // limit to two nodes if the container is narrow\r\n    return 2;\r\n  }\r\n\r\n  // find how many 3/4 portrait pictures will fit in an ideal row\r\n  const count = ratio(containerWidth, targetRowHeight) / 0.75;\r\n  return Math.round(count * 1.5);\r\n}\r\n\r\nexport default function({\r\n  images,\r\n  containerWidth,\r\n  targetHeight,\r\n  padding = 2,\r\n  seekLimit = calcSeekLimit,\r\n  byRow = false\r\n} = {}) {\r\n\r\n  // clone the images, and set ratio and initial scaled width / height\r\n  const _images = images.map((image, index) => {\r\n    return {\r\n      ...image,\r\n      index,\r\n      ratio: ratio(image.width, image.height)\r\n    }\r\n  });\r\n\r\n  const nodeSeekLimit = seekLimit(containerWidth, targetHeight);\r\n\r\n  const graph = start => {\r\n    const results = {};\r\n    start = +start;\r\n    results[start] = 0;\r\n    for (let i = start + 1; i < _images.length + 1; ++i) {\r\n      if (i - start > nodeSeekLimit) {\r\n        break;\r\n      }\r\n      results['' + i] = cost(_images, start, i, containerWidth, targetHeight, padding);\r\n    }\r\n    return results;\r\n  }\r\n\r\n  const path = dijkstra.find_path(graph, '0', _images.length);\r\n\r\n  const rows = [];\r\n  const scaledImages = [];\r\n  for (let i = 0; i < path.length; i++) {\r\n    if (path[i + 1]) {\r\n      const row = _images.slice(+path[i], +path[i + 1]);\r\n      const isLastRow = (i === path.length-2);\r\n\r\n      // scale row\r\n      const rowHeight = getRowHeight(row, containerWidth, padding);\r\n      row.forEach((image, index) => {\r\n        image.scaledWidth = scaleWidth(rowHeight, image.ratio); //.toFixed(1);\r\n        image.scaledHeight = rowHeight;\r\n        image.scaledWidthPc = round((image.scaledWidth / containerWidth) * 100);\r\n\r\n        if (index === row.length-1) {\r\n          image.isLastInRow = true;\r\n        }\r\n        image.isLastRow = isLastRow;\r\n\r\n        scaledImages.push(image);\r\n      });\r\n      rows.push(row);\r\n    }\r\n  }\r\n\r\n  if (byRow) {\r\n    return rows;\r\n  } else {\r\n    return scaledImages;\r\n  }\r\n}\r\n","function resizeListener(e) {\r\n  var win = e.target || e.srcElement\r\n  if (win.__resizeRAF__) {\r\n    cancelAnimationFrame(win.__resizeRAF__)\r\n  }\r\n  win.__resizeRAF__ = requestAnimationFrame(function () {\r\n    var trigger = win.__resizeTrigger__\r\n    var listeners = trigger &&  trigger.__resizeListeners__\r\n    if (listeners) {\r\n      listeners.forEach(function (fn) {\r\n        fn.call(trigger, e)\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nvar exports = function exports(element, fn) {\r\n  var window = this\r\n  var document = window.document\r\n  var isIE\r\n\r\n  var attachEvent = document.attachEvent\r\n  if (typeof navigator !== 'undefined') {\r\n    isIE = navigator.userAgent.match(/Trident/) ||\r\n      navigator.userAgent.match(/Edge/)\r\n  }\r\n\r\n  function objectLoad() {\r\n    this.contentDocument.defaultView.__resizeTrigger__ = this.__resizeElement__\r\n    this.contentDocument.defaultView.addEventListener('resize', resizeListener)\r\n  }\r\n\r\n  if (!element.__resizeListeners__) {\r\n    element.__resizeListeners__ = []\r\n    if (attachEvent) {\r\n      element.__resizeTrigger__ = element\r\n      element.attachEvent('onresize', resizeListener)\r\n    } else {\r\n      if (getComputedStyle(element).position === 'static') {\r\n        element.style.position = 'relative'\r\n      }\r\n      var obj = (element.__resizeTrigger__ = document.createElement('object'))\r\n      obj.setAttribute(\r\n        'style',\r\n        'position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;'\r\n      )\r\n      obj.setAttribute('class', 'resize-sensor')\r\n\r\n      // prevent <object> from stealing keyboard focus\r\n      obj.setAttribute('tabindex', '-1');\r\n\r\n      obj.__resizeElement__ = element\r\n      obj.onload = objectLoad\r\n      obj.type = 'text/html'\r\n      if (isIE) {\r\n        element.appendChild(obj)\r\n      }\r\n      obj.data = 'about:blank'\r\n      if (!isIE) {\r\n        element.appendChild(obj)\r\n      }\r\n    }\r\n  }\r\n  element.__resizeListeners__.push(fn)\r\n}\r\n\r\nmodule.exports = typeof window === 'undefined' ? exports : exports.bind(window)\r\n\r\nmodule.exports.unbind = function (element, fn) {\r\n  var attachEvent = document.attachEvent\r\n  var listeners = element.__resizeListeners__ || []\r\n  if (fn) {\r\n    var index = listeners.indexOf(fn)\r\n    if (index !== -1) {\r\n      listeners.splice(index, 1)\r\n    }\r\n  } else {\r\n    listeners = element.__resizeListeners__ = []\r\n  }\r\n  if (!listeners.length) {\r\n    if (attachEvent) {\r\n      element.detachEvent('onresize', resizeListener)\r\n    } else if (element.__resizeTrigger__) {\r\n      var contentDocument = element.__resizeTrigger__.contentDocument;\r\n      var defaultView = contentDocument && contentDocument.defaultView;\r\n      if (defaultView) {\r\n        defaultView.removeEventListener('resize', resizeListener);\r\n        delete defaultView.__resizeTrigger__;\r\n      }\r\n      element.__resizeTrigger__ = !element.removeChild(\r\n        element.__resizeTrigger__\r\n      )\r\n    }\r\n    delete element.__resizeListeners__\r\n  }\r\n}\r\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport whenElementVisible from '../common/when-element-visible';\r\nconst cache = {};\r\n\r\nexport default {\r\n  props: {\r\n    src: String,\r\n    alt: String,\r\n    srcset: String\r\n  },\r\n  data: () => ({\r\n    isLoaded: false,\r\n    isVisible: false,\r\n    isInstant: false\r\n  }),\r\n  created() {\r\n    if(cache[this.src]) {\r\n      this.isLoaded = true;\r\n      this.isVisible = true;\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.isLoaded) {\r\n      return;\r\n    }\r\n    this._observer_disconnect = whenElementVisible(this.$el, ({ isVisibleOnInit }) => {\r\n      //this.isInstant = isVisibleOnInit; // disable animation on initially visible elements\r\n      this.isVisible = true;\r\n    });\r\n  },\r\n  destroyed() {\r\n    this._observer_disconnect && this._observer_disconnect();\r\n\r\n  },\r\n  methods: {\r\n    onLoad() {\r\n      cache[this.src] = true;\r\n      this.isLoaded = true;\r\n    }\r\n  }\r\n};\r\n","export default function(element, cb, { delay = 300 } = {}) {\r\n  let isInitial = true;\r\n  let prevTime = 0;\r\n  let timeoutID = null;\r\n\r\n  const observer = new IntersectionObserver((entries, observer) => {\r\n    const { time, isIntersecting } = entries[0];\r\n\r\n    const callback = () => {\r\n      cb({\r\n        isVisibleOnInit: isInitial,\r\n        entry: entries[0]\r\n      });\r\n    }\r\n\r\n    if (isIntersecting) {\r\n      if (isInitial) {\r\n        observer.disconnect();\r\n        callback();\r\n      } else {\r\n        timeoutID = setTimeout(() => {\r\n          if (prevTime === time) {\r\n            observer.disconnect();\r\n            callback();\r\n          }\r\n        }, delay);\r\n      }\r\n    }\r\n\r\n    prevTime = time;\r\n    isInitial = false;\r\n  });\r\n\r\n  observer.observe(element);\r\n\r\n  return () => {\r\n    clearTimeout(timeoutID);\r\n    observer.disconnect();\r\n  }\r\n}\r\n","'use strict';\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof shadowMode !== 'boolean') {\n    createInjectorSSR = createInjector;\n    createInjector = shadowMode;\n    shadowMode = false;\n  } // Vue.extend constructor export interop.\n\n\n  var options = typeof script === 'function' ? script.options : script; // render functions\n\n  if (template && template.render) {\n    options.render = template.render;\n    options.staticRenderFns = template.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (style) {\n        style.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (style) {\n    hook = shadowMode ? function () {\n      style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n    } : function (context) {\n      style.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return script;\n}\n\nmodule.exports = normalizeComponent;\n//# sourceMappingURL=normalize-component.js.map\n","'use strict';\n\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\nfunction createInjector(context) {\n  return function (id, style) {\n    return addStyle(id, style);\n  };\n}\nvar HEAD;\nvar styles = {};\n\nfunction addStyle(id, css) {\n  var group = isOldIE ? css.media || 'default' : id;\n  var style = styles[group] || (styles[group] = {\n    ids: new Set(),\n    styles: []\n  });\n\n  if (!style.ids.has(id)) {\n    style.ids.add(id);\n    var code = css.source;\n\n    if (css.map) {\n      // https://developer.chrome.com/devtools/docs/javascript-debugging\n      // this makes source maps inside style tags work properly in Chrome\n      code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875\n\n      code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n    }\n\n    if (!style.element) {\n      style.element = document.createElement('style');\n      style.element.type = 'text/css';\n      if (css.media) style.element.setAttribute('media', css.media);\n\n      if (HEAD === undefined) {\n        HEAD = document.head || document.getElementsByTagName('head')[0];\n      }\n\n      HEAD.appendChild(style.element);\n    }\n\n    if ('styleSheet' in style.element) {\n      style.styles.push(code);\n      style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\\n');\n    } else {\n      var index = style.ids.size - 1;\n      var textNode = document.createTextNode(code);\n      var nodes = style.element.childNodes;\n      if (nodes[index]) style.element.removeChild(nodes[index]);\n      if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n    }\n  }\n}\n\nmodule.exports = createInjector;\n//# sourceMappingURL=browser.js.map\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport createLayout from '../common/justified-layout';\nimport elementResizeEvent, { unbind } from 'element-resize-event';\nimport lazyImage from './lazy-image.vue';\nimport { debounce } from '../common/utils';\n\nexport default {\n  props: {\n    images: {\n      type: Array,\n      required: true,\n      default: []\n    },\n    targetRowHeight: {\n      type: Number,\n      default: 220\n    },\n    padding: {\n      type: Number,\n      default: 4\n    }\n  },\n  data: () => ({\n    scaledImages: [],\n    width: 0,\n    isResizing: false\n  }),\n  components: {\n    lazyImage\n  },\n  methods: {\n    makeStyle({ scaledHeight, scaledWidth, isLastInRow, isLastRow }) {\n      let mr = this.padding + 'px';\n      const mb = isLastRow ? '0' : mr;\n      let flex = `0 0 ${scaledWidth}px`;\n      if (isLastInRow) {\n        mr = '0';\n        flex = `1 1 ${scaledWidth-4}px`;\n      }\n      return {\n        height: scaledHeight + 'px',\n        flex: flex,\n        'margin-right': mr,\n        'margin-bottom': mb\n      }\n    },\n    onClick(index, event) {\n      this.$emit('image-click', this.images[index], index, event);\n    }\n  },\n  mounted() {\n    const process = () => {\n      this.width = this.$el.getBoundingClientRect().width;\n      this.scaledImages = createLayout({\n        images: this.images,\n        containerWidth: this.width,\n        targetHeight: this.targetRowHeight,\n        padding: this.padding\n      });\n    };\n\n    const el = this.$el.querySelector('[data-resizer]');\n    const resizedFinished = debounce(() => {\n      this.isResizing = false;\n    }, 100);\n\n    elementResizeEvent(el, () => {\n      if (Math.round(this.width) !== Math.round(el.getBoundingClientRect().width)) {\n        this.isResizing = true;\n        process();\n        resizedFinished();\n      }\n    });\n\n    this.$watch('images', () => {\n      process();\n    }, {\n      immediate: true,\n      deep: true\n    });\n\n    this.$watch('targetRowHeight', process);\n  },\n  beforeDestroy() {\n    unbind(this.$el);\n  }\n};\n","\r\nimport sampleImages from '../images';\r\nimport imageMasonry from '../../../src/vue/image-masonry.vue';\r\n\r\nexport default {\r\n  data: () => ({\r\n    images: sampleImages\r\n  }),\r\n  components: {\r\n    imageMasonry\r\n  }\r\n}\r\n"],"names":["src","width","height","dijkstra","single_source_shortest_paths","graph","s","d","predecessors","costs","closest","u","cost_of_s_to_u","adjacent_nodes","cost_of_s_to_u_plus_cost_of_e","cost_of_s_to_v","open","BinaryHeap","x","cost","push","value","size","v","pop","msg","join","Error","extract_shortest_path_from_predecessor_list","nodes","reverse","find_path","scoreFunction","content","round","n","Math","Number","EPSILON","ratio","getRowHeight","row","containerWidth","padding","scaleHeight","length","reduce","acc","calcSeekLimit","targetRowHeight","count","images","targetHeight","seekLimit","byRow","_images","map","image","index","nodeSeekLimit","path","start","end","rowHeight","results","i","slice","pow","abs","rows","scaledImages","isLastRow","forEach","scaledWidth","scaledHeight","scaledWidthPc","isLastInRow","resizeListener","e","win","target","srcElement","__resizeRAF__","cancelAnimationFrame","requestAnimationFrame","trigger","__resizeTrigger__","listeners","__resizeListeners__","fn","call","prototype","element","bubbleUp","this","result","sinkDown","remove","node","len","parentN","floor","parent","elemScore","child2N","child1N","swap","child1","child1Score","child2","undefined","exports","isIE","document","attachEvent","navigator","userAgent","match","getComputedStyle","position","style","obj","createElement","setAttribute","__resizeElement__","onload","contentDocument","defaultView","addEventListener","type","appendChild","data","indexOf","splice","detachEvent","removeEventListener","removeChild","window","bind","cache","props","String","alt","srcset","isLoaded","isVisible","isInstant","created","mounted","_observer_disconnect","cb","delay","isInitial","prevTime","timeoutID","observer","IntersectionObserver","entries","callback","isVisibleOnInit","entry","time","isIntersecting","disconnect","setTimeout","observe","clearTimeout","whenElementVisible","$el","_this","destroyed","methods","onLoad","HEAD","template","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","options","render","staticRenderFns","_compiled","functional","_scopeId","context","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","h","existing","beforeCreate","concat","isOldIE","test","toLowerCase","styles","id","css","group","media","ids","Set","has","code","source","sources","btoa","unescape","encodeURIComponent","JSON","stringify","head","getElementsByTagName","styleSheet","cssText","filter","Boolean","textNode","createTextNode","childNodes","insertBefore","addStyle","Array","required","isResizing","components","lazyImage","makeStyle","mr","mb","flex","onClick","event","$emit","process","getBoundingClientRect","createLayout","el","querySelector","resizedFinished","args","arguments","that","apply","debounce","elementResizeEvent","$watch","immediate","deep","beforeDestroy","unbind","sampleImages","imageMasonry"],"mappings":"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"}