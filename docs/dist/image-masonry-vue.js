!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ImageMasonryExample=e()}(this,function(){"use strict";function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function e(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n=[{src:"https://source.unsplash.com/V6TWE6h8gyg/800x600",width:800,height:600},{src:"https://source.unsplash.com/dtaPArYUDg4/800x600",width:800,height:600},{src:"https://source.unsplash.com/R_kik2MoltU/600x799",width:600,height:799},{src:"https://source.unsplash.com/8LPgWfHgcMg/600x799",width:600,height:799},{src:"https://source.unsplash.com/mC_puQe4V3g/600x800",width:600,height:800},{src:"https://source.unsplash.com/_LuLiJc1cdo/800x600",width:800,height:600},{src:"https://source.unsplash.com/v7daTKlZzaw/800x599",width:800,height:599},{src:"https://source.unsplash.com/s7qZayMy6Go/600x799",width:600,height:799},{src:"https://source.unsplash.com/rB-4G58XFt0/600x800",width:600,height:800},{src:"https://source.unsplash.com/fg6g2u5oklo/1000x300",width:1e3,height:400},{src:"https://source.unsplash.com/eVwzKfnEGDg/800x600",width:800,height:600},{src:"https://source.unsplash.com/F_eLtGyrlNY/600x800",width:600,height:800},{src:"https://source.unsplash.com/9270-pFGVTU/800x600",width:800,height:600},{src:"https://source.unsplash.com/R4y_E5ZQDPg/800x599",width:800,height:599},{src:"https://source.unsplash.com/-QTa5xYxDCs/800x599",width:800,height:599},{src:"https://source.unsplash.com/Sfs_64L9UHE/600x800",width:600,height:800},{src:"https://source.unsplash.com/pR166OP_l6g/800x600",width:800,height:600},{src:"https://source.unsplash.com/hlvtJ4JkVfc/800x600",width:800,height:600},{src:"https://source.unsplash.com/AUYr7ptqSRQ/800x400",width:800,height:400},{src:"https://source.unsplash.com/E7PlRr9ZfoM/800x600",width:800,height:600},{src:"https://source.unsplash.com/GhlotfzelR4/800x600",width:800,height:600},{src:"https://source.unsplash.com/Xvlc79bu9MA/800x600",width:800,height:600},{src:"https://source.unsplash.com/txRO7-0I8wU/600x800",width:600,height:800},{src:"https://source.unsplash.com/e2uTOpgW5Ec/1000x300",width:1e3,height:300},{src:"https://source.unsplash.com/5BsNkTMbZZ0/800x600",width:800,height:600},{src:"https://source.unsplash.com/_31y-mxvRWI/600x800",width:600,height:800},{src:"https://source.unsplash.com/VrrZAVkzfWE/800x600",width:800,height:600}],p={single_source_shortest_paths:function(t,e,n){var i={},r={};r[e]=0;var s,o,a,c,h,u,l=new f(function(t){return t.cost});for(l.push({value:e,cost:0});l.size();)for(var d in o=(s=l.pop()).value,a=s.cost,c=t(o)||{})h=a+c[d],u=r[d],(void 0===r[d]||h<u)&&(r[d]=h,l.push({value:d,cost:h}),i[d]=o);if(void 0!==r[n])return i;var p=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(p)},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],i=e;i;)n.push(i),t[i],i=t[i];return n.reverse(),n},find_path:function(t,e,n){var i=p.single_source_shortest_paths(t,e,n);return p.extract_shortest_path_from_predecessor_list(i,n)}};function f(t){this.content=[],this.scoreFunction=t}function g(t,e){return e/t}function m(t,e){return t/e}function _(t,e,n){return function(t,e){return t*e}(e,g(t.reduce(function(t,e){return t+e.scaledWidth},0),n))}function i(t,c,h,e,n){for(var u=3<arguments.length&&void 0!==e?e:8,i=4<arguments.length&&void 0!==n&&n,l=t.map(function(t){var e=g(t.width,t.height);return function(r){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach(function(t){var e,n,i;e=r,i=s[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):d(s).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(s,t))})}return r}({},t,{ratio:e,scaledWidth:m(h,e),scaledHeight:h,scaledWidthPc:0})}),r=p.find_path(function(t){var e,n,i,r,s,o={};o[t=+t]=0;for(var a=t+1;a<l.length+1&&!(u<a-t);++a)o[""+a]=(e=t,n=a,i=c,r=h,void 0,s=_(l.slice(e,n),i,r),Math.pow(Math.abs(s-r),2));return o},"0",l.length),s=[],o=[],a=0;a<r.length;a++)r[a+1]&&function(){var t=l.slice(+r[a],+r[a+1]),e=_(t,c,h);t.forEach(function(t){t.scaledWidth=m(e,t.ratio),t.scaledHeight=e,t.scaledWidthPc=t.scaledWidth/c*100,o.push(t)}),s.push(t)}();return i?s:o}function a(n){var i=n.target||n.srcElement;i.__resizeRAF__&&cancelAnimationFrame(i.__resizeRAF__),i.__resizeRAF__=requestAnimationFrame(function(){var e=i.__resizeTrigger__,t=e&&e.__resizeListeners__;t&&t.forEach(function(t){t.call(e,n)})})}f.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.sinkDown(0)),t},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]===t){var i=this.content.pop();return void(n!==e-1&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];0<t;){var n=Math.floor((t+1)/2)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r=2*(t+1),s=r-1,o=null;if(s<e){var a=this.content[s],c=this.scoreFunction(a);c<i&&(o=s)}if(r<e){var h=this.content[r];this.scoreFunction(h)<(null===o?i:c)&&(o=r)}if(null==o)break;this.content[t]=this.content[o],this.content[o]=n,t=o}}};function t(t,e){var n,i=this.document,r=i.attachEvent;if("undefined"!=typeof navigator&&(n=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!t.__resizeListeners__)if(t.__resizeListeners__=[],r)(t.__resizeTrigger__=t).attachEvent("onresize",a);else{"static"===getComputedStyle(t).position&&(t.style.position="relative");var s=t.__resizeTrigger__=i.createElement("object");s.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),s.setAttribute("class","resize-sensor"),s.setAttribute("tabindex","-1"),s.__resizeElement__=t,s.onload=function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",a)},s.type="text/html",n&&t.appendChild(s),s.data="about:blank",n||t.appendChild(s)}t.__resizeListeners__.push(e)}function r(t,e){var n=document.attachEvent,i=t.__resizeListeners__||[];if(e){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}else i=t.__resizeListeners__=[];if(!i.length){if(n)t.detachEvent("onresize",a);else if(t.__resizeTrigger__){var s=t.__resizeTrigger__.contentDocument,o=s&&s.defaultView;o&&(o.removeEventListener("resize",a),delete o.__resizeTrigger__),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)}delete t.__resizeListeners__}}var s="undefined"==typeof window?t:t.bind(window);s.unbind=r;var o={props:{images:{type:Array,required:!0,default:[]},targetRowHeight:{type:Number,default:220}},data:function(){return{scaledImages:[],width:0}},methods:{makeStyle:function(t){return{width:t.scaledWidthPc+"%",height:t.scaledHeight+"px"}},onClick:function(t,e){this.$emit("image-click",this.images[t],t,e)}},mounted:function(){function t(){e.width=e.$el.getBoundingClientRect().width,e.scaledImages=i(e.images,e.width,e.targetRowHeight)}var e=this;s(this.$el,function(){Math.round(e.width)!==Math.round(e.$el.getBoundingClientRect().width)&&t()}),this.$watch("images",function(){t()},{immediate:!0,deep:!0}),this.$watch("targetRowHeight",t)},beforeDestroy:function(){r(this.$el)}};var c,h=function(t,e,n,i,r,s,o,a,c,h){"boolean"!=typeof o&&(c=a,a=o,o=!1);var u,l="function"==typeof n?n.options:n;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,r&&(l.functional=!0)),i&&(l._scopeId=i),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=u):e&&(u=o?function(){e.call(this,h(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(l.functional){var d=l.render;l.render=function(t,e){return u.call(e),d(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,u):[u]}return n},u="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var l={};function v(t){return function(t,e){return function(t,e){var n=u?e.media||"default":t,i=l[n]||(l[n]={ids:new Set,styles:[]});if(!i.ids.has(t)){i.ids.add(t);var r=e.source;if(e.map&&(r+="\n/*# sourceURL="+e.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",e.media&&i.element.setAttribute("media",e.media),void 0===c&&(c=document.head||document.getElementsByTagName("head")[0]),c.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(r),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var s=i.ids.size-1,o=document.createTextNode(r),a=i.element.childNodes;a[s]&&i.element.removeChild(a[s]),a.length?i.element.insertBefore(o,a[s]):i.element.appendChild(o)}}}(t,e)}}function w(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",{staticClass:"image-masonry"},n._l(n.scaledImages,function(t,e){return i("div",{key:t.src,staticClass:"image-masonry-item",style:n.makeStyle(t),on:{click:function(t){return n.onClick(e,t)}}},[i("img",{attrs:{src:t.src,alt:t.alt}}),n._v(" "),n._t("default",null,{image:t,index:e})],2)}),0)}var y=o;w._withStripped=!0;function b(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{attrs:{type:"button"},on:{click:e.onChangeImages}},[e._v("Change images")]),e._v(" "),n("button",{attrs:{type:"button"},on:{click:e.onChangeRowHeight}},[e._v("Change row height")]),e._v(" "),n("image-masonry",{attrs:{images:e.images,targetRowHeight:e.targetRowHeight},on:{"image-click":e.onClick},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("a",{staticClass:"image-masonry-overlay",attrs:{href:"javascript:void(0)"}}),e._v(" "),n("div",{staticClass:"image-masonry-item-interact has-content"},[n("div",{staticClass:"image-masonry-bar"},[n("div",{staticClass:"image-masonry-text"},[e._v("Image title")])])])])]}}])})],1)}var x={data:function(){return{images:n}},components:{imageMasonry:h({render:w,staticRenderFns:[]},function(t){t&&t("data-v-9f4ce6ea_0",{source:".image-masonry[data-v-9f4ce6ea] {\r\n  box-sizing: border-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-wrap: wrap;\r\n  flex-wrap: wrap;\n}\n.image-masonry-item[data-v-9f4ce6ea] {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  padding: 1px\n}\n.image-masonry-item img[data-v-9f4ce6ea] {\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\n}\r\n",map:void 0,media:void 0})},y,"data-v-9f4ce6ea",!(w._withStripped=!0),void 0,v,void 0)},methods:{onChangeImages:function(){var t=e(n);!function(t){for(var e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1)),i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}}(t),this.images=t},onChangeRowHeight:function(){this.targetRowHeight=this.targetRowHeight+20},onClick:function(){var t;(t=console).log.apply(t,arguments)}}};b._withStripped=!0;return h({render:b,staticRenderFns:[]},void 0,x,void 0,!(b._withStripped=!0),void 0,void 0,void 0)});
//# sourceMappingURL=image-masonry-vue.js.map
