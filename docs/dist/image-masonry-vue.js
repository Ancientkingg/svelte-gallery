!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ImageMasonryExample=t()}(this,function(){"use strict";var e=[{src:"images/a-small.jpg",width:400,height:300},{src:"images/b-small.jpg",width:400,height:300},{src:"images/c-small.jpg",width:300,height:400},{src:"images/d-small.jpg",width:300,height:400},{src:"images/e-small.jpg",width:300,height:400},{src:"images/f-small.jpg",width:400,height:300},{src:"images/g-small.jpg",width:400,height:300},{src:"images/h-small.jpg",width:300,height:400},{src:"images/i-small.jpg",width:300,height:400},{src:"images/j-small.jpg",width:833,height:250},{src:"images/k-small.jpg",width:400,height:300},{src:"images/l-small.jpg",width:300,height:400},{src:"images/m-small.jpg",width:400,height:300},{src:"images/n-small.jpg",width:400,height:300},{src:"images/o-small.jpg",width:400,height:300},{src:"images/p-small.jpg",width:300,height:400},{src:"images/q-small.jpg",width:400,height:300},{src:"images/r-small.jpg",width:400,height:300},{src:"images/s-small.jpg",width:400,height:200},{src:"images/t-small.jpg",width:400,height:300},{src:"images/u-small.jpg",width:400,height:300},{src:"images/v-small.jpg",width:400,height:300},{src:"images/w-small.jpg",width:300,height:400},{src:"images/x-small.jpg",width:833,height:250},{src:"images/y-small.jpg",width:400,height:300},{src:"images/z-small.jpg",width:300,height:400},{src:"images/zz-small.jpg",width:400,height:300}];function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}var u={single_source_shortest_paths:function(e,t,i){var n={},r={};r[t]=0;var s,o,a,c,h,l,d=new m(function(e){return e.cost});for(d.push({value:t,cost:0});d.size();)for(var g in o=(s=d.pop()).value,a=s.cost,c=e(o)||{})h=a+c[g],l=r[g],(void 0===r[g]||h<l)&&(r[g]=h,d.push({value:g,cost:h}),n[g]=o);if(void 0!==r[i])return n;var u=["Could not find a path from ",t," to ",i,"."].join("");throw new Error(u)},extract_shortest_path_from_predecessor_list:function(e,t){for(var i=[],n=t;n;)i.push(n),e[n],n=e[n];return i.reverse(),i},find_path:function(e,t,i){var n=u.single_source_shortest_paths(e,t,i);return u.extract_shortest_path_from_predecessor_list(n,i)}};function m(e){this.content=[],this.scoreFunction=e}function p(e,t){return t/e}function f(e,t){return e/t}function _(e,t,i){return function(e,t){return e*t}(t,p(e.reduce(function(e,t){return e+t.scaledWidth},0),i))}function i(e,c,h,t,i){for(var l=3<arguments.length&&void 0!==t?t:8,n=4<arguments.length&&void 0!==i&&i,d=e.map(function(e){var t=p(e.width,e.height);return function(r){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?g(s,!0).forEach(function(e){var t,i,n;t=r,n=s[i=e],i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):g(s).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(s,e))})}return r}({},e,{ratio:t,scaledWidth:f(h,t),scaledHeight:h,scaledWidthPc:0})}),r=u.find_path(function(e){var t,i,n,r,s,o={};o[e=+e]=0;for(var a=e+1;a<d.length+1&&!(l<a-e);++a)o[""+a]=(t=e,i=a,n=c,r=h,void 0,s=_(d.slice(t,i),n,r),Math.pow(Math.abs(s-r),2));return o},"0",d.length),s=[],o=[],a=0;a<r.length;a++)r[a+1]&&function(){var e=d.slice(+r[a],+r[a+1]),t=_(e,c,h);e.forEach(function(e){e.scaledWidth=f(t,e.ratio),e.scaledHeight=t,e.scaledWidthPc=e.scaledWidth/c*100,o.push(e)}),s.push(e)}();return n?s:o}function a(i){var n=i.target||i.srcElement;n.__resizeRAF__&&cancelAnimationFrame(n.__resizeRAF__),n.__resizeRAF__=requestAnimationFrame(function(){var t=n.__resizeTrigger__,e=t&&t.__resizeListeners__;e&&e.forEach(function(e){e.call(t,i)})})}m.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return 0<this.content.length&&(this.content[0]=t,this.sinkDown(0)),e},remove:function(e){for(var t=this.content.length,i=0;i<t;i++)if(this.content[i]===e){var n=this.content.pop();return void(i!==t-1&&(this.content[i]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.bubbleUp(i):this.sinkDown(i)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e];0<e;){var i=Math.floor((e+1)/2)-1,n=this.content[i];if(!(this.scoreFunction(t)<this.scoreFunction(n)))break;this.content[i]=t,this.content[e]=n,e=i}},sinkDown:function(e){for(var t=this.content.length,i=this.content[e],n=this.scoreFunction(i);;){var r=2*(e+1),s=r-1,o=null;if(s<t){var a=this.content[s],c=this.scoreFunction(a);c<n&&(o=s)}if(r<t){var h=this.content[r];this.scoreFunction(h)<(null===o?n:c)&&(o=r)}if(null==o)break;this.content[e]=this.content[o],this.content[o]=i,e=o}}};function t(e,t){var i,n=this.document,r=n.attachEvent;if("undefined"!=typeof navigator&&(i=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!e.__resizeListeners__)if(e.__resizeListeners__=[],r)(e.__resizeTrigger__=e).attachEvent("onresize",a);else{"static"===getComputedStyle(e).position&&(e.style.position="relative");var s=e.__resizeTrigger__=n.createElement("object");s.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),s.setAttribute("class","resize-sensor"),s.setAttribute("tabindex","-1"),s.__resizeElement__=e,s.onload=function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",a)},s.type="text/html",i&&e.appendChild(s),s.data="about:blank",i||e.appendChild(s)}e.__resizeListeners__.push(t)}function n(e,t){var i=document.attachEvent,n=e.__resizeListeners__||[];if(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}else n=e.__resizeListeners__=[];if(!n.length){if(i)e.detachEvent("onresize",a);else if(e.__resizeTrigger__){var s=e.__resizeTrigger__.contentDocument,o=s&&s.defaultView;o&&(o.removeEventListener("resize",a),delete o.__resizeTrigger__),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)}delete e.__resizeListeners__}}var r="undefined"==typeof window?t:t.bind(window);r.unbind=n;var s={props:{images:{type:Array,required:!0,default:[]},targetRowHeight:{type:Number,default:220}},data:function(){return{scaledImages:[],width:0}},methods:{makeStyle:function(e){return{width:e.scaledWidthPc+"%",height:e.scaledHeight+"px"}},onClick:function(e,t){this.$emit("image-click",this.images[e],e,t)}},mounted:function(){function e(){t.width=t.$el.getBoundingClientRect().width,t.scaledImages=i(t.images,t.width,t.targetRowHeight)}var t=this;r(this.$el,function(){Math.round(t.width)!==Math.round(t.$el.getBoundingClientRect().width)&&e()}),this.$watch("images",function(){e()},{immediate:!0,deep:!0}),this.$watch("targetRowHeight",e)},beforeDestroy:function(){n(this.$el)}};var c,o=function(e,t,i,n,r,s,o,a,c,h){"boolean"!=typeof o&&(c=a,a=o,o=!1);var l,d="function"==typeof i?i.options:i;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,r&&(d.functional=!0)),n&&(d._scopeId=n),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=l):t&&(l=o?function(){t.call(this,h(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),l)if(d.functional){var g=d.render;d.render=function(e,t){return l.call(t),g(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return i},h="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var l={};function d(e){return function(e,t){return function(e,t){var i=h?t.media||"default":e,n=l[i]||(l[i]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);var r=t.source;if(t.map&&(r+="\n/*# sourceURL="+t.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),void 0===c&&(c=document.head||document.getElementsByTagName("head")[0]),c.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(r),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var s=n.ids.size-1,o=document.createTextNode(r),a=n.element.childNodes;a[s]&&n.element.removeChild(a[s]),a.length?n.element.insertBefore(o,a[s]):n.element.appendChild(o)}}}(e,t)}}function v(){var i=this,e=i.$createElement,n=i._self._c||e;return n("div",{staticClass:"image-masonry"},i._l(i.scaledImages,function(e,t){return n("div",{key:e.src,staticClass:"image-masonry-item",style:i.makeStyle(e),on:{click:function(e){return i.onClick(t,e)}}},[n("img",{attrs:{src:e.src,alt:e.alt}}),i._v(" "),i._t("default",null,{image:e,index:t})],2)}),0)}function w(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("image-masonry",{attrs:{images:this.images}})],1)}var b=s,y=(v._withStripped=!0,{data:function(){return{images:e}},components:{imageMasonry:o({render:v,staticRenderFns:[]},function(e){e&&e("data-v-b77dee24_0",{source:".image-masonry[data-v-b77dee24] {\r\n  box-sizing: border-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-wrap: wrap;\r\n  flex-wrap: wrap;\n}\n.image-masonry-item[data-v-b77dee24] {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  padding: 1px\n}\n.image-masonry-item img[data-v-b77dee24] {\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\n}\r\n",map:void 0,media:void 0})},b,"data-v-b77dee24",!(v._withStripped=!0),void 0,d,void 0)}});w._withStripped=!0;return o({render:w,staticRenderFns:[]},void 0,y,void 0,!(w._withStripped=!0),void 0,void 0,void 0)});
//# sourceMappingURL=image-masonry-vue.js.map
